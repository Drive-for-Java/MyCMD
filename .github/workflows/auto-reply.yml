name: ğŸ¤– Auto Reply to Issues & PRs

on:
  issues:
    types: [opened, reopened]
  pull_request:
    types: [opened, reopened]

permissions:
  issues: write
  pull-requests: write

jobs:
  auto-comment:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§  Auto Comment
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const eventName = context.eventName;
            const repo = context.repo;

            const footer = `
---

ğŸŒ **Stay Connected with the MyCMD Community:**

- ğŸ’» [Website](https://Drive-for-java.github.io)
- ğŸ’¬ [Discord Server](https://discord.gg/MYdZbvR5gC)
- ğŸ“± [WhatsApp Channel](https://whatsapp.com/channel/0029VbAsOiM8KMqmrdpdUG2W)

Thank you for being part of **Drive for Java ğŸš—â˜•**
`;

            if (eventName === "issues") {
              const user = context.payload.issue.user.login;
              const message = `ğŸ‘‹ Hi @${user}!

Thank you for opening an issue in **MyCMD**.  
Our maintainers will review it soon. Please make sure your report includes:

- âœ… Clear reproduction steps  
- ğŸ“‹ Logs or stack traces (if applicable)  
- ğŸ§  Details about your environment (Java version, OS, etc.)

This helps us fix and improve faster!${footer}`;

              await github.rest.issues.createComment({
                owner: repo.owner,
                repo: repo.repo,
                issue_number: context.issue.number,
                body: message
              });

              await github.rest.reactions.createForIssue({
                owner: repo.owner,
                repo: repo.repo,
                issue_number: context.issue.number,
                content: "tada"
              });
            }

            if (eventName === "pull_request") {
              const user = context.payload.pull_request.user.login;
              const message = `ğŸš€ Hi @${user}!

Thank you for contributing to **MyCMD** ğŸ‰  
Your pull request has been received and will be reviewed shortly by our maintainers.

Meanwhile, please ensure:
- ğŸ§± Your code passes CI checks  
- ğŸ“– Youâ€™ve updated docs or comments if needed  
- ğŸ§© Youâ€™ve tested it locally

We appreciate your efforts to make MyCMD better!${footer}`;

              await github.rest.issues.createComment({
                owner: repo.owner,
                repo: repo.repo,
                issue_number: context.payload.pull_request.number,
                body: message
              });

              await github.rest.reactions.createForIssue({
                owner: repo.owner,
                repo: repo.repo,
                issue_number: context.payload.pull_request.number,
                content: "rocket"
              });
            }
